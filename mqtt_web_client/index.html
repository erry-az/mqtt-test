<!DOCTYPE html>
<html>
  <head>
    <title>MQTT Web Client</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./index.css" type="text/css" />
    <link rel="icon" type="image/png" href="./resources/favicon.ico" />
    <meta charset="UTF-8" />
  </head>
  <body class="d-flex flex-column">
    <div id="header">
      <img id="logo" src="resources/mqtt-chat.png" alt="mqtt-logo" />
      <img id="tagline" src="resources/mqtt-tagline.png" alt="mqtt-logo" />
    </div>

    <div class="flex-grow-1 d-flex flex-column" id="container">
      <div class="flex-grow-1" id="chatbox"></div>

      <div id="control" class="row">
        <div class="col setting-wrapper">
          <button id="setting" class="control-btn" onclick="main()">
            Setting<br />
            <span class="shortcutkey">Esc</span>
          </button>
        </div>
        <div class="col-sm-8 col-lg-10" id="chat-container">
          <textarea
            name="chat"
            id="chat"
            onchange="toggleSend()"
            onkeyup="toggleSend()"
            onkeypress="handleEnter(event)"
            disabled="true"
          ></textarea>
        </div>
        <div class="col send-wrapper">
          <button
            id="send"
            disabled="true"
            onclick="onSend()"
            class="control-btn"
          >
            Send<br />
            <span class="shortcutkey">Enter</span>
          </button>
        </div>
      </div>
    </div>

    <!-- modal component -->
    <div
      class="modal fade"
      id="config-modal"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      tabindex="-1"
      aria-labelledby="staticBackdropLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <form
          class="modal-content"
          action="#"
          onsubmit="newConnection(); return false"
        >
          <div class="modal-header">
            <h5 class="modal-title" id="staticBackdropLabel">Configuration</h5>
            <button
              type="button"
              class="btn-close config-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <input
                type="text"
                name="topic"
                value=""
                placeholder="Add your topic"
                required
                class="form-control"
                id="config-topic"
              />
              <span class="form-text"
                >This topic will be used for publishing and subscribing
                message.</span
              >
            </div>

            <div class="collapse" id="advance-config">
              <input
                type="text"
                name="host"
                value=""
                placeholder="Broker host"
                required
                class="form-control hidden-input"
                id="config-host"
              />

              <input
                type="number"
                name="port"
                value=""
                placeholder="Port number"
                required
                class="form-control hidden-input"
                id="config-port"
              />

              <input
                type="text"
                name="client-id"
                value=""
                placeholder="Client ID"
                required
                class="form-control hidden-input"
                id="config-client-id"
              />
            </div>

            <a
              data-bs-toggle="collapse"
              href="#advance-config"
              class="link-secondary"
              >Toggle advance configuration</a
            >
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary config-close"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button type="submit" class="btn btn-primary">
              Start Chatting
            </button>
          </div>
        </form>
      </div>
    </div>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js"
      type="text/javascript"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript" src="scripts/shortcut.js"></script>
    <script type="text/javascript" src="scripts/index.js"></script>
    <script type="text/javascript" src="scripts/mqtt.js"></script>
    <script type="text/javascript" src="scripts/chat.js"></script>
  </body>
</html>
